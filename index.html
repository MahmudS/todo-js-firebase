<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>testjs + firebase</title>
        <link href="todo.css" rel="stylesheet" />
    </head>
    <body onload="init_script();">
        <div id="root">
            <div class="todo-list">
                <div class="add-item">
                    <form method="POST" onsubmit="return false;">
                        <label for="addText">Add</label><input id="addText" name="addItem" type="text" value=""/>
                        <button class="add-item-button" id="addTextButton">Add</button>
                    </form>
                </div>
                
                <div id="todo-items">
                </div>
            </div>
        </div>
    </body>
    
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-firestore.js" defer></script>
    <script src="database.js" defer></script>
    <script src="todo.js" defer></script>
    <script>
        
        let todoApp;
        
        function init_script() {
            todoApp = new todoClass(firebase);
            todoApp.initAddButton('addTextButton');

            let app = todoApp.connect();
            app.then(
                () => {
                    return todoApp.load();
                }
            ).then(
                () => {
                    return todoApp.render();
                }
            ).catch(
                (err) => {
                    console.error(err);
                }
            )
        }
    </script>
</html>